# short-link
Данное веб-приложение преобразовывает длинные веб ссылки в короткие. Так же с его помощью можно получить статистику по использованию сокращенных ссылок.
## Инструкция по запуску
1. Скачать директорию к себе на компьютер
2. Установить директорию на нужный сервер
3. Присвоить директории доменное имя
4. Перейти по присвоенному домену(адресу) в браузере
5. После загрузки страницы, ввести в адресную строку(сразу после ...short/) нужную ссылку для сокращения и перейти по получившемуся адресу
6. На странице вы увидите сгенерированную короткую ссылку
7. Нажмите на данную ссылку или скопируйте ее и перейдите по ней с помощью адресной строки
8. Перейдя по данной ссылке, вы будете перенаправлены на веб-ресурс, длинную ссылку которого предоставляли ранее
#### Методы API
* __ваш домен/short__ - метод для превращения длинной ссылки в короткую. Для его использования, необходимо в адресной строке написать сделующую конструкцию (ваш домен/short/ваша длинная ссылка)
* __ваш домен/links__ - метод для вывода списка всех ссылок, которые вы преобразовывали в короткие
* __ваш домен/stas__ - метод для вывода списка всех преобразованных ссылок, а так же вывода статистики по кол-ву переходов по ним
## Создание базы данных
В данном веб-приложении используется реляционная база данных MySQL.
Для работы приложения, понадобится сделать следующее:  
1. Создать базу данных с названием 'link_shortener' и кодировкой 'utf8_general_ci'
2. Создать в бд таблицу под название 'link_data' с 5 столбцами (id, long_link, short_link, user_ip, number_of_calls)  
3. Запрос на создание таблицы:   
`CREATE TABLE link_shortener.link_data (id INT(255) NOT NULL AUTO_INCREMENT, long_link VARCHAR(3000) NOT NULL, short_link VARCHAR(26) NOT NULL ,user_ip VARCHAR(255) NOT NULL, number_of_calls INT(255) NOT NULL, PRIMARY KEY (id), UNIQUE (short_link))`
4. В папке /database уже есть файл config.php, в котором прописаны все конфиги. При необходимости их можно изменить на свои
## Результаты нагрузочного тестирования
Тестирование проводилось с помощью утилиты ab(Apache Benchmark). С помощью данной утилиты были протестированы все сценарии работы веб-приложения. В тестировании использовались следующие параметры: количество запросов - 1000, количество одновременных запросов - 100.  Ниже представлены основные показатели по определенным сценариям:  

* Переход по короткой ссылке и перенаправление на длинную  
__Requests per second:    420.67 [#/sec] (mean)  
Time per request:       237.717 [ms] (mean)__  
* Вывод списка всех ссылок пользователя, которые были сокращены  
__Requests per second:    673.39 [#/sec] (mean)  
Time per request:       148.502 [ms] (mean)__  
* Вывод списка всех преобразованных ссылок пользователя, а так же статистики перехода по ним  
__Requests per second:    1041.20 [#/sec] (mean)  
Time per request:       96.043 [ms] (mean)__  

В ходе тестирования были предприняты попытки оптимизации скорости работы, в частности за счет добавления индекса для столбца 'long_link' в бд. Но после нескольких тестов стало понятно, что это не дает прироста в скорости, вполне возможно из за малого кол-ва записей в таблице. Более не было найдено никаких мест в программе, где можно было бы за счет изменений оптимизировать и ускорить работу сценария.
